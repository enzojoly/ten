Resolving dependencies...
Build profile: -w ghc-9.8.2 -O1
In order, the following will be built (use -v for more details):
 - ten-0.1.0.0 (lib) (first run)
 - ten-0.1.0.0 (test:ten-test) (first run)
Configuring library for ten-0.1.0.0...
Preprocessing library for ten-0.1.0.0...
Building library for ten-0.1.0.0...
[ 1 of 10] Compiling Ten.Core         ( src/Ten/Core.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Core.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Core.dyn_o )

src/Ten/Core.hs:1:1: warning: [GHC-85401] [-Wmissing-export-lists]
    The export item ‘module Ten.Core’ is missing an export list
  |
1 | {-# LANGUAGE DataKinds #-}
  | ^

src/Ten/Core.hs:17:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.ByteString’ is redundant
      except perhaps to import instances from ‘Data.ByteString’
    To import instances alone, use: import Data.ByteString()
   |
17 | import Data.ByteString (ByteString)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:18:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.ByteString’ is redundant
      except perhaps to import instances from ‘Data.ByteString’
    To import instances alone, use: import Data.ByteString()
   |
18 | import qualified Data.ByteString as BS
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:19:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Map.Strict’ is redundant
      except perhaps to import instances from ‘Data.Map.Strict’
    To import instances alone, use: import Data.Map.Strict()
   |
19 | import Data.Map.Strict (Map)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:20:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Map.Strict’ is redundant
      except perhaps to import instances from ‘Data.Map.Strict’
    To import instances alone, use: import Data.Map.Strict()
   |
20 | import qualified Data.Map.Strict as Map
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:25:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Directory’ is redundant
      except perhaps to import instances from ‘System.Directory’
    To import instances alone, use: import System.Directory()
   |
25 | import System.Directory
   | ^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:27:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Process’ is redundant
      except perhaps to import instances from ‘System.Process’
    To import instances alone, use: import System.Process()
   |
27 | import System.Process
   | ^^^^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:28:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Exit’ is redundant
      except perhaps to import instances from ‘System.Exit’
    To import instances alone, use: import System.Exit()
   |
28 | import System.Exit
   | ^^^^^^^^^^^^^^^^^^

src/Ten/Core.hs:123:14: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘state’ shadows the existing binding
      imported from ‘Control.Monad.State’ at src/Ten/Core.hs:16:1-26
      (and originally defined in ‘Control.Monad.State.Class’)
    |
123 | runTen m env state = runExceptT $ runStateT (runReaderT (runTenM m) env) state
    |              ^^^^^
[ 2 of 10] Compiling Ten.Hash         ( src/Ten/Hash.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Hash.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Hash.dyn_o )
[ 3 of 10] Compiling Ten.Store        ( src/Ten/Store.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Store.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Store.dyn_o )

src/Ten/Store.hs:26:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text.Encoding’ is redundant
      except perhaps to import instances from ‘Data.Text.Encoding’
    To import instances alone, use: import Data.Text.Encoding()
   |
26 | import qualified Data.Text.Encoding as TE
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Store.hs:27:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Set’ is redundant
      except perhaps to import instances from ‘Data.Set’
    To import instances alone, use: import Data.Set()
   |
27 | import Data.Set (Set)
   | ^^^^^^^^^^^^^^^^^^^^^

src/Ten/Store.hs:30:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.FilePath’ is redundant
      except perhaps to import instances from ‘System.FilePath’
    To import instances alone, use: import System.FilePath()
   |
30 | import System.FilePath
   | ^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Store.hs:31:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.IO.Error’ is redundant
      except perhaps to import instances from ‘System.IO.Error’
    To import instances alone, use: import System.IO.Error()
   |
31 | import System.IO.Error
   | ^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Store.hs:71:5: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘try’ shadows the existing binding
      imported from ‘Control.Exception’ at src/Ten/Store.hs:21:27-29
      (and originally defined in ‘Control.Exception.Base’)
   |
71 |     try = Control.Exception.try
   |     ^^^

src/Ten/Store.hs:76:5: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
   |
76 |     env <- ask
   |     ^^^
[ 4 of 10] Compiling Ten.Sandbox      ( src/Ten/Sandbox.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Sandbox.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Sandbox.dyn_o )

src/Ten/Sandbox.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Exception’ is redundant
      except perhaps to import instances from ‘Control.Exception’
    To import instances alone, use: import Control.Exception()
   |
16 | import Control.Exception (bracket)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Sandbox.hs:26:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Process’ is redundant
      except perhaps to import instances from ‘System.Process’
    To import instances alone, use: import System.Process()
   |
26 | import System.Process
   | ^^^^^^^^^^^^^^^^^^^^^

src/Ten/Sandbox.hs:27:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Exit’ is redundant
      except perhaps to import instances from ‘System.Exit’
    To import instances alone, use: import System.Exit()
   |
27 | import System.Exit
   | ^^^^^^^^^^^^^^^^^^

src/Ten/Sandbox.hs:31:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Store’ is redundant
      except perhaps to import instances from ‘Ten.Store’
    To import instances alone, use: import Ten.Store()
   |
31 | import Ten.Store
   | ^^^^^^^^^^^^^^^^
[ 5 of 10] Compiling Ten.GC           ( src/Ten/GC.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/GC.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/GC.dyn_o )

src/Ten/GC.hs:22:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Map.Strict’ is redundant
      except perhaps to import instances from ‘Data.Map.Strict’
    To import instances alone, use: import Data.Map.Strict()
   |
22 | import Data.Map.Strict (Map)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/GC.hs:23:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Map.Strict’ is redundant
      except perhaps to import instances from ‘Data.Map.Strict’
    To import instances alone, use: import Data.Map.Strict()
   |
23 | import qualified Data.Map.Strict as Map
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/GC.hs:28:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.IO.Error’ is redundant
      except perhaps to import instances from ‘System.IO.Error’
    To import instances alone, use: import System.IO.Error()
   |
28 | import System.IO.Error
   | ^^^^^^^^^^^^^^^^^^^^^^

src/Ten/GC.hs:215:5: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘try’ shadows the existing binding
      imported from ‘Control.Exception’ at src/Ten/GC.hs:18:27-29
      (and originally defined in ‘Control.Exception.Base’)
    |
215 |     try = Control.Exception.try
    |     ^^^

src/Ten/GC.hs:230:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘getFileSize’
    |
230 | getFileSize path = do
    | ^^^^^^^^^^^
[ 6 of 10] Compiling Ten.Derivation   ( src/Ten/Derivation.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Derivation.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Derivation.dyn_o )

src/Ten/Derivation.hs:17:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.Reader’ is redundant
      except perhaps to import instances from ‘Control.Monad.Reader’
    To import instances alone, use: import Control.Monad.Reader()
   |
17 | import Control.Monad.Reader (ask)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Derivation.hs:28:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.FilePath’ is redundant
      except perhaps to import instances from ‘System.FilePath’
    To import instances alone, use: import System.FilePath()
   |
28 | import System.FilePath
   | ^^^^^^^^^^^^^^^^^^^^^^
[ 7 of 10] Compiling Ten.Graph        ( src/Ten/Graph.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Graph.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Graph.dyn_o )

src/Ten/Graph.hs:19:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.Reader’ is redundant
      except perhaps to import instances from ‘Control.Monad.Reader’
    To import instances alone, use: import Control.Monad.Reader()
   |
19 | import Control.Monad.Reader (ask)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Graph.hs:20:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.IO.Class’ is redundant
      except perhaps to import instances from ‘Control.Monad.IO.Class’
    To import instances alone, use: import Control.Monad.IO.Class()
   |
20 | import Control.Monad.IO.Class (liftIO)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Graph.hs:26:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
26 | import qualified Data.Text as T
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Graph.hs:32:51: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘StorePath’ from module ‘Ten.Core’ is redundant
   |
32 | import Ten.Core (TenM, Phase(..), BuildError(..), StorePath(..))
   |                                                   ^^^^^^^^^^^^^

src/Ten/Graph.hs:177:14: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘graph’
    |
177 | detectCycles graph = do
    |              ^^^^^

src/Ten/Graph.hs:206:14: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘graph’
    |
206 | findAffected graph changedPaths = do
    |              ^^^^^

src/Ten/Graph.hs:216:19: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘graph’
    |
216 | transitiveClosure graph startNodes = do
    |                   ^^^^^
[ 8 of 10] Compiling Ten.Build        ( src/Ten/Build.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Build.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/Build.dyn_o )

src/Ten/Build.hs:18:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Map.Strict’ is redundant
      except perhaps to import instances from ‘Data.Map.Strict’
    To import instances alone, use: import Data.Map.Strict()
   |
18 | import Data.Map.Strict (Map)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/Build.hs:27:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.IO’ is redundant
      except perhaps to import instances from ‘System.IO’
    To import instances alone, use: import System.IO()
   |
27 | import System.IO
   | ^^^^^^^^^^^^^^^^

src/Ten/Build.hs:110:20: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘stdout’ shadows the existing binding
      imported from ‘System.IO’ at src/Ten/Build.hs:27:1-16
      (and originally defined in ‘GHC.IO.StdHandles’)
    |
110 |         (exitCode, stdout, stderr) <- liftIO $ readCreateProcessWithExitCode processConfig ""
    |                    ^^^^^^

src/Ten/Build.hs:110:28: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘stderr’ shadows the existing binding
      imported from ‘System.IO’ at src/Ten/Build.hs:27:1-16
      (and originally defined in ‘GHC.IO.StdHandles’)
    |
110 |         (exitCode, stdout, stderr) <- liftIO $ readCreateProcessWithExitCode processConfig ""
    |                            ^^^^^^
[ 9 of 10] Compiling Ten.CLI          ( src/Ten/CLI.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/CLI.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten/CLI.dyn_o )

src/Ten/CLI.hs:12:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad’ is redundant
      except perhaps to import instances from ‘Control.Monad’
    To import instances alone, use: import Control.Monad()
   |
12 | import Control.Monad
   | ^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:13:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.IO.Class’ is redundant
      except perhaps to import instances from ‘Control.Monad.IO.Class’
    To import instances alone, use: import Control.Monad.IO.Class()
   |
13 | import Control.Monad.IO.Class (liftIO)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:14:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.Reader’ is redundant
      except perhaps to import instances from ‘Control.Monad.Reader’
    To import instances alone, use: import Control.Monad.Reader()
   |
14 | import Control.Monad.Reader (ask)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:15:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.Except’ is redundant
      except perhaps to import instances from ‘Control.Monad.Except’
    To import instances alone, use: import Control.Monad.Except()
   |
15 | import Control.Monad.Except (throwError)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
16 | import Data.Text (Text)
   | ^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:19:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Set’ is redundant
      except perhaps to import instances from ‘Data.Set’
    To import instances alone, use: import Data.Set()
   |
19 | import Data.Set (Set)
   | ^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:22:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.FilePath’ is redundant
      except perhaps to import instances from ‘System.FilePath’
    To import instances alone, use: import System.FilePath()
   |
22 | import System.FilePath
   | ^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:23:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.Environment’ is redundant
      except perhaps to import instances from ‘System.Environment’
    To import instances alone, use: import System.Environment()
   |
23 | import System.Environment
   | ^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:26:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Ten.Core’ is redundant
      except perhaps to import instances from ‘Ten.Core’
    To import instances alone, use: import Ten.Core()
   |
26 | import qualified Ten.Core as Core  -- Use qualified import to avoid name clashes
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:27:48: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘TenM’ from module ‘Ten.Core’ is redundant
   |
27 | import Ten.Core (BuildEnv(..), BuildError(..), TenM) -- Import specific non-conflicting names
   |                                                ^^^^

src/Ten/CLI.hs:28:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Build’ is redundant
      except perhaps to import instances from ‘Ten.Build’
    To import instances alone, use: import Ten.Build()
   |
28 | import Ten.Build
   | ^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:29:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Store’ is redundant
      except perhaps to import instances from ‘Ten.Store’
    To import instances alone, use: import Ten.Store()
   |
29 | import Ten.Store
   | ^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:30:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.GC’ is redundant
      except perhaps to import instances from ‘Ten.GC’
    To import instances alone, use: import Ten.GC()
   |
30 | import Ten.GC
   | ^^^^^^^^^^^^^

src/Ten/CLI.hs:31:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Derivation’ is redundant
      except perhaps to import instances from ‘Ten.Derivation’
    To import instances alone, use: import Ten.Derivation()
   |
31 | import Ten.Derivation
   | ^^^^^^^^^^^^^^^^^^^^^

src/Ten/CLI.hs:129:21: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
    |
129 | buildDerivationFile env file = do
    |                     ^^^

src/Ten/CLI.hs:146:20: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
    |
146 | evalExpressionFile env file = do
    |                    ^^^

src/Ten/CLI.hs:163:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
    |
163 | runGC env = do
    |       ^^^

src/Ten/CLI.hs:175:14: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
    |
175 | showPathInfo env path = do
    |              ^^^

src/Ten/CLI.hs:187:11: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘env’
    |
187 | showRoots env = do
    |           ^^^
[10 of 10] Compiling Ten              ( src/Ten.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten.o, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/build/Ten.dyn_o )

src/Ten.hs:61:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad’ is redundant
      except perhaps to import instances from ‘Control.Monad’
    To import instances alone, use: import Control.Monad()
   |
61 | import Control.Monad
   | ^^^^^^^^^^^^^^^^^^^^

src/Ten.hs:62:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.Reader’ is redundant
      except perhaps to import instances from ‘Control.Monad.Reader’
    To import instances alone, use: import Control.Monad.Reader()
   |
62 | import Control.Monad.Reader (ask)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten.hs:64:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Monad.IO.Class’ is redundant
      except perhaps to import instances from ‘Control.Monad.IO.Class’
    To import instances alone, use: import Control.Monad.IO.Class()
   |
64 | import Control.Monad.IO.Class (liftIO)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten.hs:66:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
66 | import qualified Data.Text as T
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten.hs:79:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Ten.Hash’ is redundant
      except perhaps to import instances from ‘Ten.Hash’
    To import instances alone, use: import Ten.Hash()
   |
79 | import qualified Ten.Hash as Hash
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Ten.hs:104:9: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘env’
    |
104 |     let env = initBuildEnv "/tmp/ten-build" store
    |         ^^^

src/Ten.hs:105:5: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘content’
    |
105 |     content <- BS.readFile file
    |     ^^^^^^^

src/Ten.hs:129:16: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘expr’
    |
129 | evalExpression expr = do
    |                ^^^^
Configuring test suite 'ten-test' for ten-0.1.0.0...
Preprocessing test suite 'ten-test' for ten-0.1.0.0...
Building test suite 'ten-test' for ten-0.1.0.0...
[1 of 1] Compiling Main             ( test/Spec.hs, /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/t/ten-test/build/ten-test/ten-test-tmp/Main.o )

test/Spec.hs:1:1: warning: [GHC-85401] [-Wmissing-export-lists]
    The export item ‘module Main’ is missing an export list
  |
1 | {-# LANGUAGE OverloadedStrings #-}
  | ^

test/Spec.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text.Encoding’ is redundant
      except perhaps to import instances from ‘Data.Text.Encoding’
    To import instances alone, use: import Data.Text.Encoding()
   |
16 | import qualified Data.Text.Encoding as TE
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Spec.hs:26:1: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘BuildEnv, BuildError, Phase, StorePath, TenM,
                   buildTen, evalTen, initBuildEnv, runTen’
    from module ‘Ten.Core’ is redundant
   |
26 | import Ten.Core (TenM, Phase(..), BuildEnv(..), BuildError(..), StorePath(..),
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...

test/Spec.hs:29:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Store’ is redundant
      except perhaps to import instances from ‘Ten.Store’
    To import instances alone, use: import Ten.Store()
   |
29 | import Ten.Store
   | ^^^^^^^^^^^^^^^^

test/Spec.hs:30:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Sandbox’ is redundant
      except perhaps to import instances from ‘Ten.Sandbox’
    To import instances alone, use: import Ten.Sandbox()
   |
30 | import Ten.Sandbox
   | ^^^^^^^^^^^^^^^^^^

test/Spec.hs:31:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Derivation’ is redundant
      except perhaps to import instances from ‘Ten.Derivation’
    To import instances alone, use: import Ten.Derivation()
   |
31 | import Ten.Derivation
   | ^^^^^^^^^^^^^^^^^^^^^

test/Spec.hs:33:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.Graph’ is redundant
      except perhaps to import instances from ‘Ten.Graph’
    To import instances alone, use: import Ten.Graph()
   |
33 | import Ten.Graph (BuildGraph, BuildNode)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Spec.hs:34:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Ten.GC’ is redundant
      except perhaps to import instances from ‘Ten.GC’
    To import instances alone, use: import Ten.GC()
   |
34 | import Ten.GC
   | ^^^^^^^^^^^^^

test/Spec.hs:269:28: warning: [GHC-58008] [-Wgadt-mono-local-binds]
    Pattern matching on GADTs without MonoLocalBinds is fragile.
    Suggested fix:
      Enable any of the following extensions: GADTs, TypeFamilies
    |
269 | runProofGenerationTest env Core.TypeProof = do
    |                            ^^^^^^^^^^^^^^

test/Spec.hs:274:28: warning: [GHC-58008] [-Wgadt-mono-local-binds]
    Pattern matching on GADTs without MonoLocalBinds is fragile.
    Suggested fix:
      Enable any of the following extensions: GADTs, TypeFamilies
    |
274 | runProofGenerationTest env Core.AcyclicProof = do
    |                            ^^^^^^^^^^^^^^^^^

test/Spec.hs:279:28: warning: [GHC-58008] [-Wgadt-mono-local-binds]
    Pattern matching on GADTs without MonoLocalBinds is fragile.
    Suggested fix:
      Enable any of the following extensions: GADTs, TypeFamilies
    |
279 | runProofGenerationTest env Core.BuildProof = do
    |                            ^^^^^^^^^^^^^^^

test/Spec.hs:367:36: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘buildDir’
    |
367 |       withSandbox inputs config $ \buildDir -> do
    |                                    ^^^^^^^^

test/Spec.hs:535:54: warning: [GHC-63394] [-Wx-partial]
    In the use of ‘head’
    (imported from Prelude, but defined in GHC.List):
    "This is a partial function, it throws an error on empty lists. Use pattern matching or Data.List.uncons instead. Consider refactoring to use Data.List.NonEmpty."
    |
535 |           in if null outputs then "" else storeHash (head outputs)
    |                                                      ^^^^

test/Spec.hs:541:54: warning: [GHC-63394] [-Wx-partial]
    In the use of ‘head’
    (imported from Prelude, but defined in GHC.List):
    "This is a partial function, it throws an error on empty lists. Use pattern matching or Data.List.uncons instead. Consider refactoring to use Data.List.NonEmpty."
    |
541 |           in if null outputs then "" else storeHash (head outputs)
    |                                                      ^^^^
[2 of 2] Linking /home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/t/ten-test/build/ten-test/ten-test
Running 1 test suites...
Test suite ten-test: RUNNING...

Ten Build System Core Properties
  Content-addressed storage
    computes consistent hashes for identical content [✔]
    computes different hashes for different content [✔]
Adding to store: 48ab47cb11b2b3fad94e3d0f7b4e40a70d14ae16fbe439d1432ac0add107bb53-test-file
    correctly adds and retrieves content from the store [✔]
Adding to store: 488fa3242b183eb7d75bb68d96bb65b587e10ad290b02477a2212386ce782f06-verify-file
    verifies content hash matches path hash [✔]
  Build phase separation
    enforces eval-phase-only operations [✔]
Adding to store: 02512903e85d7eb1f18f39e576ab4b2a93e0d65cc499e63c5bd450e5327aae12-hello.c
    enforces build-phase-only operations [✔]
    fails when build operations are attempted in eval phase [✔]
  Proof system
    generates and validates type proofs [✔]
    generates and validates acyclic proofs [✔]
    generates and validates build proofs [✔]
    composes proofs correctly [✔]
  Deterministic builds
Adding to store: 285b0911f1f30f29d38f45891b7d74698059bcdef9ab199a2b1b893a30b19ae3-determinism.txt
    produces identical outputs for identical inputs [✔]
  Build isolation
Adding to store: 93ab980e4b52b24f42ecb905f40020479481cdc2e4d6e756362ebf71dd48aac8-sandbox-test.txt
Created sandbox at: /tmp/ten-sandbox-7c3e6cdd4d879fbc
Cleaning up sandbox: /tmp/ten-sandbox-7c3e6cdd4d879fbc
    correctly isolates builds in sandboxes [✔]
Created sandbox at: /tmp/ten-sandbox-ec4cf6a6f4427cd7
root:x:0:0::/root:/usr/bin/bash
alpm:x:982:982:Arch Linux Package Management:/:/usr/bin/nologin
bin:x:1:1::/:/usr/bin/nologin
daemon:x:2:2::/:/usr/bin/nologin
mail:x:8:12::/var/spool/mail:/usr/bin/nologin
ftp:x:14:11::/srv/ftp:/usr/bin/nologin
http:x:33:33::/srv/http:/usr/bin/nologin
nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin
dbus:x:81:81:System Message Bus:/:/usr/bin/nologin
git:x:981:981:git daemon user:/:/usr/bin/git-shell
polkitd:x:102:102:User for polkitd:/:/usr/bin/nologin
uuidd:x:980:980:UUID generator helper daemon:/var/lib/libuuid:/usr/bin/nologin
enzo:x:1000:1000::/home/enzo:/bin/zsh
ntp:x:87:87:Network Time Protocol:/var/lib/ntp:/bin/false
avahi:x:979:979:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin
mpd:x:45:45::/var/lib/mpd:/usr/bin/nologin
nixbld01:x:977:978:Nix builder 01:/:/usr/bin/nologin
nixbld02:x:976:978:Nix builder 02:/:/usr/bin/nologin
nixbld03:x:975:978:Nix builder 03:/:/usr/bin/nologin
nixbld04:x:974:978:Nix builder 04:/:/usr/bin/nologin
nixbld05:x:973:978:Nix builder 05:/:/usr/bin/nologin
nixbld06:x:972:978:Nix builder 06:/:/usr/bin/nologin
nixbld07:x:971:978:Nix builder 07:/:/usr/bin/nologin
nixbld08:x:970:978:Nix builder 08:/:/usr/bin/nologin
nixbld09:x:969:978:Nix builder 09:/:/usr/bin/nologin
nixbld10:x:968:978:Nix builder 10:/:/usr/bin/nologin

Cleaning up sandbox: /tmp/ten-sandbox-ec4cf6a6f4427cd7
    prevents access to unauthorized paths [✔]
  Dependency management
    correctly builds dependency graphs [✔]
    validates graph acyclicity [✔]
  Garbage collection
Adding to store: 2b268ce70e5dcf76b22f9d33999d604ae7e1c0150ff1e231863ff9c371187cb2-gc-test1.txt
Adding to store: 3dbcfd07f5b23f44774a484a41e180d4ecc0c84f3aba95aefb4d7e90b3fbed65-gc-test2.txt
Adding to store: b878e00a02356ddd6984ad1510ee1611366bb41f1c9a9a13a1b1f4cab0373ba7-gc-root.txt
Added GC root: test-root -> b878e00a02356ddd6984ad1510ee1611366bb41f1c9a9a13a1b1f4cab0373ba7
    correctly identifies and collects unreachable paths [✔]
Adding to store: dcbc6ae6c4e36b146332d1d0c8e62349e3e662556b7b44a7675422b87eea40ee-gc-preserve.txt
Added GC root: preserve-root -> dcbc6ae6c4e36b146332d1d0c8e62349e3e662556b7b44a7675422b87eea40ee
    preserves reachable paths [✔]
  C compilation example
Adding to store: 02512903e85d7eb1f18f39e576ab4b2a93e0d65cc499e63c5bd450e5327aae12-hello.c
Adding to store: 4d10567fa1351fc6a80aeaa040c824851fba09598d54c72b5b8c1adad59dd8c5-build-hello
Instantiated derivation: hello
Created sandbox at: /tmp/ten-sandbox-bc7ad40b721efb21
Builder permissions - executable: True
Building in: /tmp/ten-sandbox-bc7ad40b721efb21
Building: hello
Command: /tmp/ten-sandbox-bc7ad40b721efb21/builder hello.c -o /tmp/ten-sandbox-bc7ad40b721efb21/out/hello
Build succeeded: hello
Output directory contents: ["hello"]
Checking for output: hello at /tmp/ten-sandbox-bc7ad40b721efb21/out/hello (exists: True)
Adding to store: 6fe8895db9d638e449c5f326584c95e6b80b1cf72681ca6d4f70da5629e6fa79-hello
Cleaning up sandbox: /tmp/ten-sandbox-bc7ad40b721efb21
    successfully builds hello.c [✔]
Instantiated derivation: hello
Created sandbox at: /tmp/ten-sandbox-151193381dcff66b
Builder permissions - executable: True
Building in: /tmp/ten-sandbox-151193381dcff66b
Building: hello
Command: /tmp/ten-sandbox-151193381dcff66b/builder hello.c -o /tmp/ten-sandbox-151193381dcff66b/out/hello
Build succeeded: hello
Output directory contents: ["hello"]
Checking for output: hello at /tmp/ten-sandbox-151193381dcff66b/out/hello (exists: True)
Cleaning up sandbox: /tmp/ten-sandbox-151193381dcff66b
    produces a verified executable output [✔]
    fails gracefully with missing input [✔]
Instantiated derivation: hello
Created sandbox at: /tmp/ten-sandbox-ecbeedd97c439950
Builder permissions - executable: True
Building in: /tmp/ten-sandbox-ecbeedd97c439950
Building: hello
Command: /tmp/ten-sandbox-ecbeedd97c439950/builder hello.c -o /tmp/ten-sandbox-ecbeedd97c439950/out/hello
Build succeeded: hello
Output directory contents: ["hello"]
Checking for output: hello at /tmp/ten-sandbox-ecbeedd97c439950/out/hello (exists: True)
Cleaning up sandbox: /tmp/ten-sandbox-ecbeedd97c439950
Instantiated derivation: hello
Created sandbox at: /tmp/ten-sandbox-2ab0b54165029869
Builder permissions - executable: True
Building in: /tmp/ten-sandbox-2ab0b54165029869
Building: hello
Command: /tmp/ten-sandbox-2ab0b54165029869/builder hello.c -o /tmp/ten-sandbox-2ab0b54165029869/out/hello
Build succeeded: hello
Output directory contents: ["hello"]
Checking for output: hello at /tmp/ten-sandbox-2ab0b54165029869/out/hello (exists: True)
Cleaning up sandbox: /tmp/ten-sandbox-2ab0b54165029869
    reproduces identical build results [✔]

Finished in 0.1775 seconds
22 examples, 0 failures
Test suite ten-test: PASS
Test suite logged to:
/home/enzo/ten/dist-newstyle/build/x86_64-linux/ghc-9.8.2/ten-0.1.0.0/t/ten-test/test/ten-0.1.0.0-ten-test.log
1 of 1 test suites (1 of 1 test cases) passed.
